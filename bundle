{% comment %}
  Refined Cartoon Bundle Landing Page Section
{% endcomment %}

<style>
  .cb-landing-wrapper { font-family: 'Poppins', sans-serif; color: #333; line-height: 1.6; background-color: #f9f9f9; }
  .cb-container { max-width: 800px; margin: 0 auto; padding: 40px 20px; text-align: center; }
  .cb-headline { font-size: 2.2rem; font-weight: 800; margin-bottom: 25px; }
  .cb-highlight { color: #e63946; }
  .cb-video-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; background: #000; border-radius: 12px; margin: 30px 0; }
  .cb-video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
  .cb-features-list { text-align: left; display: inline-block; margin: 20px 0; font-size: 1.1rem; list-style: none; }
  .cb-features-list li { margin-bottom: 10px; }
  .cb-cta-box { background: #ffffff; border: 3px dashed #e63946; border-radius: 15px; padding: 40px 20px; margin: 40px 0; }
  .cb-price-old { text-decoration: line-through; color: #888; font-size: 1.4rem; }
  .cb-price-new { font-size: 3.5rem; font-weight: 900; color: #111; margin: 10px 0; }
  .cb-buy-btn { display: block; background: #ffcc00; color: #000; padding: 22px; font-size: 1.6rem; font-weight: bold; border-radius: 50px; text-decoration: none; box-shadow: 0 10px 20px rgba(0,0,0,0.1); border: none; width: 100%; cursor: pointer; }
  .cb-faq-trigger { width: 100%; padding: 20px; background: none; border: none; text-align: left; font-weight: 600; cursor: pointer; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; }
  .cb-faq-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease; padding: 0 20px; color: #666; }
</style>

<div class="cb-landing-wrapper">
  <div class="cb-container">
    
    <h1 class="cb-headline">
      {%- assign headline_parts = section.settings.headline | replace: '[', '|||' | replace: ']', '|||' | split: '|||' -%}
      {%- for part in headline_parts -%}
        {%- if forloop.index == 2 -%}
          <span class="cb-highlight">{{ part }}</span>
        {%- else -%}
          {{ part }}
        {%- endif -%}
      {%- endfor -%}
    </h1>

    {% if section.settings.video_url != blank %}
      <div class="cb-video-container">
        <iframe src="https://www.youtube.com/embed/{{ section.settings.video_url.id }}" frameborder="0" allowfullscreen></iframe>
      </div>
    {% endif %}

    <ul class="cb-features-list">
      {{ section.settings.features_html }}
    </ul>

    <div class="cb-cta-box">
      <span class="cb-price-old">{{ section.settings.old_price }}</span>
      <div class="cb-price-new">{{ section.settings.new_price }}</div>
      
      {%- form 'product', product -%}
        <input type="hidden" name="id" value="{{ section.settings.variant_id }}">
        <button type="submit" class="cb-buy-btn">{{ section.settings.button_text }}</button>
      {%- endform -%}
      
      <p style="margin-top:15px; font-weight:bold; color:#e63946;">{{ section.settings.timer_text }}</p>
    </div>
  </div>

  <div class="cb-container">
    <h2>{{ section.settings.faq_title }}</h2>
    {% for block in section.blocks %}
      <div class="cb-faq-item" {{ block.shopify_attributes }}>
        <button class="cb-faq-trigger">{{ block.settings.question }} <span>+</span></button>
        <div class="cb-faq-content">
          <p style="padding: 20px 0;">{{ block.settings.answer }}</p>
        </div>
      </div>
    {% endfor %}
  </div>
</div>

<script>
  document.querySelectorAll('.cb-faq-trigger').forEach(trigger => {
    trigger.addEventListener('click', () => {
      const content = trigger.nextElementSibling;
      const isOpen = content.style.maxHeight !== '0px' && content.style.maxHeight !== '';
      document.querySelectorAll('.cb-faq-content').forEach(c => c.style.maxHeight = '0px');
      if (!isOpen) { content.style.maxHeight = content.scrollHeight + "px"; }
    });
  });
</script>

{% schema %}
{
  "name": "Cartoon Bundle Landing",
  "settings": [
    { "type": "textarea", "id": "headline", "label": "Headline", "default": "Earn [1-2 Lakhs] with Cartoons" },
    { "type": "video_url", "id": "video_url", "label": "YouTube URL", "accept": ["youtube"] },
    { "type": "html", "id": "features_html", "label": "Features HTML", "default": "<li>✅ 2000+ Videos</li>" },
    { "type": "text", "id": "old_price", "label": "Old Price", "default": "₹497" },
    { "type": "text", "id": "new_price", "label": "New Price", "default": "₹197" },
    { "type": "text", "id": "button_text", "label": "Button Text", "default": "BUY NOW" },
    { "type": "text", "id": "variant_id", "label": "Product Variant ID" },
    { "type": "text", "id": "timer_text", "label": "Timer Text", "default": "Offer Ends Soon!" },
    { "type": "text", "id": "faq_title", "label": "FAQ Title", "default": "FAQs" }
  ],
  "blocks": [
    {
      "type": "faq",
      "name": "FAQ",
      "settings": [
        { "type": "text", "id": "question", "label": "Question" },
        { "type": "textarea", "id": "answer", "label": "Answer" }
      ]
    }
  ],
  "presets": [{ "name": "Cartoon Bundle Landing" }]
}
{% endschema %}
